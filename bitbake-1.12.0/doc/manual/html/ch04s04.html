<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Metadata</title><link rel="stylesheet" href="docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="BitBake User Manual"><link rel="up" href="ch04.html" title="Chapter 4. The bitbake command"><link rel="prev" href="ch04s03.html" title="Special variables"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Metadata</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s03.html">Prev</a> </td><th width="60%" align="center">Chapter 4. The bitbake command</th><td width="20%" align="right"> </td></tr></table><hr></div><div class="section" title="Metadata"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2659352"></a>Metadata</h2></div></div></div><p>As you may have seen in the usage information, or in the information about .bb files, the BBFILES variable is how the bitbake tool locates its files.  This variable is a space separated list of files that are available, and supports wildcards.
                </p><div class="example"><a name="id2659364"></a><p class="title"><b>Example 4.4. Setting BBFILES</b></p><div class="example-contents"><pre class="programlisting"><code class="varname">BBFILES</code> = "/path/to/bbfiles/*.bb"</pre></div></div><p><br class="example-break"></p><p>With regard to dependencies, it expects the .bb to define a <code class="varname">DEPENDS</code> variable, which contains a space separated list of <span class="quote">&#8220;<span class="quote">package names</span>&#8221;</span>, which themselves are the <code class="varname">PN</code> variable.  The <code class="varname">PN</code> variable is, in general, by default, set to a component of the .bb filename.</p><div class="example"><a name="id2659397"></a><p class="title"><b>Example 4.5. Depending on another .bb</b></p><div class="example-contents"><p>a.bb:
    </p><pre class="screen">PN = "package-a"
DEPENDS += "package-b"</pre><p>
                    </p><p>b.bb:
    </p><pre class="screen">PN = "package-b"</pre><p>
                    </p></div></div><br class="example-break"><div class="example"><a name="id2659421"></a><p class="title"><b>Example 4.6. Using PROVIDES</b></p><div class="example-contents"><p>This example shows the usage of the PROVIDES variable, which allows a given .bb to specify what functionality it provides.</p><p>package1.bb:
    </p><pre class="screen">PROVIDES += "virtual/package"</pre><p>
                    </p><p>package2.bb:
    </p><pre class="screen">DEPENDS += "virtual/package"</pre><p>
                    </p><p>package3.bb:
    </p><pre class="screen">PROVIDES += "virtual/package"</pre><p>
                    </p><p>As you can see, here there are two different .bb's that provide the same functionality (virtual/package).  Clearly, there needs to be a way for the person running bitbake to control which of those providers gets used.  There is, indeed, such a way.</p><p>The following would go into a .conf file, to select package1:
    </p><pre class="screen">PREFERRED_PROVIDER_virtual/package = "package1"</pre><p>
                    </p></div></div><br class="example-break"><div class="example"><a name="id2659478"></a><p class="title"><b>Example 4.7. Specifying version preference</b></p><div class="example-contents"><p>When there are multiple <span class="quote">&#8220;<span class="quote">versions</span>&#8221;</span> of a given package, bitbake defaults to selecting the most recent version, unless otherwise specified.  If the .bb in question has a <code class="varname">DEFAULT_PREFERENCE</code> set lower than the other .bb's (default is 0), then it will not be selected.  This allows the person or persons maintaining the repository of .bb files to specify their preferences for the default selected version.  In addition, the user can specify their preferences with regard to version.</p><p>If the first .bb is named <code class="filename">a_1.1.bb</code>, then the <code class="varname">PN</code> variable will be set to <span class="quote">&#8220;<span class="quote">a</span>&#8221;</span>, and the <code class="varname">PV</code> variable will be set to 1.1.</p><p>If we then have an <code class="filename">a_1.2.bb</code>, bitbake will choose 1.2 by default.  However, if we define the following variable in a .conf that bitbake parses, we can change that.
    </p><pre class="screen">PREFERRED_VERSION_a = "1.1"</pre><p>
                    </p></div></div><br class="example-break"><div class="example"><a name="id2659537"></a><p class="title"><b>Example 4.8. Using <span class="quote">&#8220;<span class="quote">bbfile collections</span>&#8221;</span></b></p><div class="example-contents"><p>bbfile collections exist to allow the user to have multiple repositories of bbfiles that contain the same exact package.  For example, one could easily use them to make one's own local copy of an upstream repository, but with custom modifications that one does not want upstream.  Usage:</p><pre class="screen">BBFILES = "/stuff/openembedded/*/*.bb /stuff/openembedded.modified/*/*.bb"
BBFILE_COLLECTIONS = "upstream local"
BBFILE_PATTERN_upstream = "^/stuff/openembedded/"
BBFILE_PATTERN_local = "^/stuff/openembedded.modified/"
BBFILE_PRIORITY_upstream = "5"
BBFILE_PRIORITY_local = "10"</pre></div></div><br class="example-break"></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top">Special variables </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
